!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("widget-core-library",[],e):"object"==typeof exports?exports["widget-core-library"]=e():t["widget-core-library"]=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="/dist/",e(0)}([function(t,e,i){t.exports=i(8)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}function s(t){return t.json()}function o(){var t=window.navigator.userAgent,e=function(e){var i=t.match(e);return i&&i.length>1&&i[1]||""},i=e(/version\/(\d+(\.\d+)?)/i);return/android/i.test(t)?{browser:"android",browserVersion:i}:/(ipod|iphone|ipad)/i.test(t)?{browser:"ios",browserVersion:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/msie|trident/i.test(t)?{browser:"internet-explorer",browserVersion:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(t)?{browser:"chrome",browserVersion:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/safari|applewebkit/i.test(t)?{browser:"safari",browserVersion:i}:/chrome.+? edge/i.test(t)?{browser:"microsoft-edge",browserVersion:e(/edge\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?{browser:"firefox",browserVersion:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)}:void 0}function a(){l["default"].adapters=c["default"].adapters,l["default"].root=".",c["default"].formatters.translate=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return E["default"].getTranslation.apply(E["default"],e)},c["default"].formatters["==="]=function(t,e){return t===e},c["default"].formatters["=="]=function(t,e){return t==e},c["default"].formatters[">="]=function(t,e){return t>=e},c["default"].formatters[">"]=function(t,e){return t>e},c["default"].formatters["<="]=function(t,e){return t<=e},c["default"].formatters["<"]=function(t,e){return t<e},c["default"].formatters["!="]=function(t,e){return t!=e},c["default"].formatters["!=="]=function(t,e){return t!==e},c["default"].formatters.and=function(t,e){return t&&e},c["default"].formatters.or=function(t,e){return t||e},c["default"].formatters.not=function(t){return!t},c["default"].formatters["-"]=function(t,e){return t-e},c["default"].formatters["+"]=function(t,e){return t+e},c["default"].formatters["*"]=function(t,e){return t*e},c["default"].formatters["/"]=function(t,e){return t/e},c["default"].formatters["?"]=function(t,e){return t?t:e},c["default"].formatters.array_at=function(t,e,i){return null==t||0===t.length?[]:t[e][i]},c["default"].formatters.property_list=function(t){return function(){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push({key:i,value:t[i]});return e}()},c["default"].binders["style-*"]=function(t,e){t.style.setProperty(this.args[0],e)},c["default"].binders.cloak={priority:-1e3,bind:function(t){t.style.opacity=0},routine:function(t,e){void 0!==e&&e!==!1&&setTimeout(function(){t.style.opacity=1},100)}},c["default"].binders["anim-stagger"]=function(t,e){if(e<0)return!1;var i=t.getAttribute("data-anim-disable");if("true"===i)return!1;var n=70;t.classList.remove("anim-stagger"),t.classList.add("anim-stagger"),setTimeout(function(){t.classList.add("anim-enter-active"),setTimeout(function(){t.classList.remove("anim-stagger"),t.classList.remove("anim-enter-active")},200)},n*e)},c["default"].binders["anim-disable"]=function(t,e){t.setAttribute("data-anim-disable",e)},c["default"].binders["custom-class"]=function(t,e){var i=t.getAttribute("rv-toggle-class");e===!0?t.classList.add(i):t.classList.remove(i)}}Object.defineProperty(e,"__esModule",{value:!0});var u=i(2),l=n(u),h=i(6),c=n(h),f=i(3),d=n(f),p=i(9),g=n(p),v=i(10),b=n(v),m=i(11),y=n(m),w=i(4),E=n(w),O=i(5),x=n(O),k=i(12),T=n(k);a(),e["default"]={browser:o().browser,browserVersion:o().browserVersion,Component:d["default"],expectedApiVersion:"1.0.0.13",development:!1,utilModule:x["default"],widgetModule:T["default"],offeringModule:b["default"],statisticsModule:y["default"],apiReady:!1,config:{apiBaseUrl:"",auth:!1,channelId:1,currency:"",customer:"",device:"desktop",locale:"en_GB",market:"GB",oddsFormat:"decimal",offering:"",routeRoot:"",streamingAllowedForPlayer:!0,client_id:2,version:"v2"},height:450,pageInfo:{leaguePaths:[],pageParam:"",pageTrackingPath:"",pageType:""},PaginationComponent:g["default"],apiVersions:{client:"",libs:"",wapi:""},widgetTrackingName:null,args:{},init:function(t){var e=this;return new Promise(function(i,n){window.KambiWidget?window.self===window.top?(console.warn(window.location.host+window.location.pathname+" is being loaded as stand-alone"),fetch("mockSetupData.json").then(r).then(s).then(function(n){console.debug("Loaded mock setup data"),console.debug(n),e.applySetupData(n,t),null!=e.translationModule?e.translationModule.fetchTranslations(n.clientConfig.locale).then(function(){i(n.arguments)}):i(n.arguments)})["catch"](function(t){console.debug("Request failed"),console.trace(t),n()})):(window.KambiWidget.apiReady=function(n){e.widgetModule.api=n,n.VERSION!==e.expectedApiVersion&&console.warn("Wrong Kambi API version loaded, expected: "+e.expectedApiVersion+" got: "+n.VERSION),e.requestSetup(function(n){e.applySetupData(n,t),e.widgetModule.requestBetslipOutcomes(),e.widgetModule.requestOddsFormat(),null!=e.translationModule?e.translationModule.fetchTranslations(n.clientConfig.locale).then(function(){i(n.arguments)}):i(n.arguments)})},window.KambiWidget.receiveResponse=function(t){e.widgetModule.handleResponse(t)}):(console.warn("Kambi widget API not loaded"),n())})},applySetupData:function(t,e){this.setConfig(t.clientConfig),this.setPageInfo(t.pageInfo),this.setVersions(t.versions),e===!0&&this.setHeight(t.height),this.apiReady=!0},setConfig:function(t){for(var e in t)t.hasOwnProperty(e)&&this.config.hasOwnProperty(e)&&(this.config[e]=t[e]);null==this.config.routeRoot?this.config.routeRoot="":this.config.routeRoot.length>0&&"/"!==this.config.routeRoot.slice(-1)&&(this.config.routeRoot+="/")},setPageInfo:function(t){"filter"===t.pageType&&"/"!==t.pageParam.substr(-1)&&(t.pageParam+="/"),this.pageInfo=t},setVersions:function(t){for(var e in t)t.hasOwnProperty(e)&&this.apiVersions.hasOwnProperty(e)&&(this.apiVersions[e]=t[e])},setArgs:function(t){this.args=t},requestSetup:function(t){this.widgetModule.requestSetup(t)},receiveRespone:function(t){console.debug(t)},setOddsFormat:function(t){this.config.oddsFormat=t},setHeight:function(t){this.height=t,this.widgetModule.setHeight(t)},getData:function(t){return fetch(t).then(r).then(s)["catch"](function(t){throw console.debug("Error fetching data"),console.trace(t),t})},getFile:function(t){return fetch(t).then(r)["catch"](function(t){throw console.debug("Error fetching file"),console.trace(t),t})},setWidgetTrackingName:function(t){this.widgetTrackingName=t}}},function(t,e,i){var n,r;(function(){function i(t,e,i,n){return new s(t,e,i,n)}function s(t,e,i,n){this.options=n||{},this.options.adapters=this.options.adapters||{},this.obj=t,this.keypath=e,this.callback=i,this.objectPath=[],this.update=this.update.bind(this),this.parse(),o(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}function o(t){return"object"==typeof t&&null!==t}function a(t){throw new Error("[sightglass] "+t)}i.adapters={},s.tokenize=function(t,e,i){var n,r,s=[],o={i:i,path:""};for(n=0;n<t.length;n++)r=t.charAt(n),~e.indexOf(r)?(s.push(o),o={i:r,path:""}):o.path+=r;return s.push(o),s},s.prototype.parse=function(){var t,e,n=this.interfaces();n.length||a("Must define at least one adapter interface."),~n.indexOf(this.keypath[0])?(t=this.keypath[0],e=this.keypath.substr(1)):("undefined"==typeof(t=this.options.root||i.root)&&a("Must define a default root adapter."),e=this.keypath),this.tokens=s.tokenize(e,n,t),this.key=this.tokens.pop()},s.prototype.realize=function(){var t,e=this.obj,i=!1;return this.tokens.forEach(function(n,r){o(e)?("undefined"!=typeof this.objectPath[r]?e!==(t=this.objectPath[r])&&(this.set(!1,n,t,this.update),this.set(!0,n,e,this.update),this.objectPath[r]=e):(this.set(!0,n,e,this.update),this.objectPath[r]=e),e=this.get(n,e)):(i===!1&&(i=r),(t=this.objectPath[r])&&this.set(!1,n,t,this.update))},this),i!==!1&&this.objectPath.splice(i),e},s.prototype.update=function(){var t,e;(t=this.realize())!==this.target&&(o(this.target)&&this.set(!1,this.key,this.target,this.callback),o(t)&&this.set(!0,this.key,t,this.callback),e=this.value(),this.target=t,(this.value()instanceof Function||this.value()!==e)&&this.callback())},s.prototype.value=function(){if(o(this.target))return this.get(this.key,this.target)},s.prototype.setValue=function(t){o(this.target)&&this.adapter(this.key).set(this.target,this.key.path,t)},s.prototype.get=function(t,e){return this.adapter(t).get(e,t.path)},s.prototype.set=function(t,e,i,n){var r=t?"observe":"unobserve";this.adapter(e)[r](i,e.path,n)},s.prototype.interfaces=function(){var t=Object.keys(this.options.adapters);return Object.keys(i.adapters).forEach(function(e){~t.indexOf(e)||t.push(e)}),t},s.prototype.adapter=function(t){return this.options.adapters[t.i]||i.adapters[t.i]},s.prototype.unobserve=function(){var t;this.tokens.forEach(function(e,i){(t=this.objectPath[i])&&this.set(!1,e,t,this.update)},this),o(this.target)&&this.set(!1,this.key,this.target,this.callback)},"undefined"!=typeof t&&t.exports?t.exports=i:(n=[],r=function(){return this.sightglass=i}.apply(e,n),!(void 0!==r&&(t.exports=r)))}).call(this)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),s=n(r),o=i(6),a=n(o),u=i(1),l=n(u),h=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var n={};return e.forEach(function(t){t=t||{},Object.keys(t).forEach(function(e){n[e]=t[e]})}),n};e["default"]=s["default"].subclass({defaultArgs:{},htmlTemplate:null,constructor:function(t){var e=this;this.scope={},this.view=null,this.rootElement=null,null==t&&(t={});var i=["defaultArgs","rootElement"];if(i.forEach(function(i){"undefined"!=typeof t[i]&&(e[i]=t[i])}),null==this.rootElement)throw new Error("options.rootElement not set, please pass a HTMLElement or a CSS selector");var n,r={};return n=l["default"].apiReady===!0?new Promise(function(t){t()}):new Promise(function(t){l["default"].init().then(function(i){null==i&&(i={});var n=l["default"].widgetModule.api.VERSION;null==n&&(n="1.0.0.13"),e.scope.widgetCss="//c3-static.kambi.com/sb-mobileclient/widget-api/"+n+"/resources/css/"+l["default"].config.customer+"/"+l["default"].config.offering+"/widgets.css";var s=i.externalArgsUrl||e.defaultArgs.externalArgsUrl;null!=s?l["default"].getData(s).then(function(n){r=h(e.defaultArgs,i,n),t()})["catch"](function(){console.log("Unable to load or parse external args"),r=h(e.defaultArgs,i),t()}):(r=h(e.defaultArgs,i),t())})}),n.then(function(){null!=r.conditionalArgs&&r.conditionalArgs.forEach(function(t){var e=!0;null!=t.clientConfig&&Object.keys(t.clientConfig).forEach(function(i){l["default"].config[i]!==t.clientConfig[i]&&(e=!1)}),null!=t.pageInfo&&Object.keys(t.pageInfo).forEach(function(i){l["default"].pageInfo[i]!==t.pageInfo[i]&&(e=!1)}),e&&(console.log("Applying conditional arguments:"),console.log(t.args),r=h(r,t.args))}),e.scope.args=r,"string"==typeof e.rootElement&&(e.rootElement=document.querySelector(e.rootElement));for(var t=0;t<e.rootElement.attributes.length;++t){var i=e.rootElement.attributes[t];if(0===i.name.indexOf("data-")){var n=i.name.slice(5);e.scope[n]=i.value}}"string"==typeof e.htmlTemplate&&(e.htmlTemplate.length<100&&null!=window[e.htmlTemplate]?e.rootElement.innerHTML=window[e.htmlTemplate]:e.rootElement.innerHTML=e.htmlTemplate),e.view=a["default"].bind(e.rootElement,e.scope),e.init()})}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),s=n(r);e["default"]={i18nStrings:{},fetchTranslations:function(t){null==t&&(t="en_GB");var e=this,i="i18n/";return s["default"].development===!0&&(i="transpiled/i18n/"),new Promise(function(n,r){window.CoreLibrary.getData(i+t+".json").then(function(t){s["default"].translationModule.i18nStrings=t,n()})["catch"](function(i){"en_GB"!==t?(console.debug("Could not load translations for "+t+" falling back to en_GB"),e.fetchTranslations("en_GB").then(n)):(console.debug("Could not load translations for en_GB"),console.trace(i),n())})})},getTranslation:function(t){if(null!=this.i18nStrings[t]){for(var e=this.i18nStrings[t],i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var s=0;s<n.length;s++){var o=n[s]||"";e=e.replace("{"+s+"}",o)}return e}return t}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(4),s=n(r);e["default"]={diffArray:function(t,e){for(var i={},n=[],r=e.length;r--;)i[e[r]]=null;for(var r=t.length;r--;)i.hasOwnProperty(t[r])||n.push(t[r]);return n},getOddsDecimalValue:function(t){return t<100?t.toFixed(2):t<1e3?t.toFixed(1):t.toFixed(0)},getOutcomeLabel:function(t,e){switch(t.type){case"OT_ONE":return e.homeLabelCustom&&""!==e.homeLabelCustom?e.homeLabelCustom:e.homeName;case"OT_CROSS":return s["default"].getTranslation("draw");case"OT_TWO":return e.awayLabelCustom&&""!==e.awayLabelCustom?e.awayLabelCustom:e.awayName;case"OT_OVER":return t.label+" "+t.line/1e3;case"OT_UNDER":return t.label+" "+t.line/1e3;default:return console.warn("Unhandled outcome type: "+t.type,t),t.label}}}},function(t,e,i){var n,r;(function(t){(function(){var s,o,a,u,l=function(t,e){return function(){return t.apply(e,arguments)}},h=[].slice,c={}.hasOwnProperty,f=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},d=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};s={options:["prefix","templateDelimiters","rootInterface","preloadData","handler","executeFunctions"],extensions:["binders","formatters","components","adapters"],"public":{binders:{},components:{},formatters:{},adapters:{},prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,executeFunctions:!1,iterationAlias:function(t){return"%"+t+"%"},handler:function(t,e,i){return this.call(t,e,i.view.models)},configure:function(t){var e,i,n,r;null==t&&(t={});for(n in t)if(r=t[n],"binders"===n||"components"===n||"formatters"===n||"adapters"===n)for(i in r)e=r[i],s[n][i]=e;else s["public"][n]=r},bind:function(t,e,i){var n;return null==e&&(e={}),null==i&&(i={}),n=new s.View(t,e,i),n.bind(),n},init:function(t,e,i){var n,r,o;if(null==i&&(i={}),null==e&&(e=document.createElement("div")),t=s["public"].components[t],r=t.template.call(this,e),r instanceof HTMLElement){for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(r)}else e.innerHTML=r;return n=t.initialize.call(this,e,i),o=new s.View(e,n),o.bind(),o}}},window.jQuery||window.$?(u="on"in jQuery.prototype?["on","off"]:["bind","unbind"],o=u[0],a=u[1],s.Util={bindEvent:function(t,e,i){return jQuery(t)[o](e,i)},unbindEvent:function(t,e,i){return jQuery(t)[a](e,i)},getInputValue:function(t){var e;return e=jQuery(t),"checkbox"===e.attr("type")?e.is(":checked"):e.val()}}):s.Util={bindEvent:function(){return"addEventListener"in window?function(t,e,i){return t.addEventListener(e,i,!1)}:function(t,e,i){return t.attachEvent("on"+e,i)}}(),unbindEvent:function(){return"removeEventListener"in window?function(t,e,i){return t.removeEventListener(e,i,!1)}:function(t,e,i){return t.detachEvent("on"+e,i)}}(),getInputValue:function(t){var e,i,n,r;if("checkbox"===t.type)return t.checked;if("select-multiple"===t.type){for(r=[],i=0,n=t.length;i<n;i++)e=t[i],e.selected&&r.push(e.value);return r}return t.value}},s.TypeParser=function(){function t(){}return t.types={primitive:0,keypath:1},t.parse=function(t){return/^'.*'$|^".*"$/.test(t)?{type:this.types.primitive,value:t.slice(1,-1)}:"true"===t?{type:this.types.primitive,value:!0}:"false"===t?{type:this.types.primitive,value:!1}:"null"===t?{type:this.types.primitive,value:null}:"undefined"===t?{type:this.types.primitive,value:void 0}:""===t?{type:this.types.primitive,value:void 0}:isNaN(Number(t))===!1?{type:this.types.primitive,value:Number(t)}:{type:this.types.keypath,value:t}},t}(),s.TextTemplateParser=function(){function t(){}return t.types={text:0,binding:1},t.parse=function(t,e){var i,n,r,s,o,a,u;for(a=[],s=t.length,i=0,n=0;n<s;){if(i=t.indexOf(e[0],n),i<0){a.push({type:this.types.text,value:t.slice(n)});break}if(i>0&&n<i&&a.push({type:this.types.text,value:t.slice(n,i)}),n=i+e[0].length,i=t.indexOf(e[1],n),i<0){o=t.slice(n-e[1].length),r=a[a.length-1],(null!=r?r.type:void 0)===this.types.text?r.value+=o:a.push({type:this.types.text,value:o});break}u=t.slice(n,i).trim(),a.push({type:this.types.binding,value:u}),n=i+e[1].length}return a},t}(),s.View=function(){function t(t,e,i){var n,r,o,a,u,h,c,f,d,p,g,v,b;for(this.els=t,this.models=e,null==i&&(i={}),this.update=l(this.update,this),this.publish=l(this.publish,this),this.sync=l(this.sync,this),this.unbind=l(this.unbind,this),this.bind=l(this.bind,this),this.select=l(this.select,this),this.traverse=l(this.traverse,this),this.build=l(this.build,this),this.buildBinding=l(this.buildBinding,this),this.bindingRegExp=l(this.bindingRegExp,this),this.options=l(this.options,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),d=s.extensions,u=0,c=d.length;u<c;u++){if(r=d[u],this[r]={},i[r]){p=i[r];for(n in p)o=p[n],this[r][n]=o}g=s["public"][r];for(n in g)o=g[n],null==(a=this[r])[n]&&(a[n]=o)}for(v=s.options,h=0,f=v.length;h<f;h++)r=v[h],this[r]=null!=(b=i[r])?b:s["public"][r];this.build()}return t.prototype.options=function(){var t,e,i,n,r;for(e={},r=s.extensions.concat(s.options),i=0,n=r.length;i<n;i++)t=r[i],e[t]=this[t];return e},t.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")},t.prototype.buildBinding=function(t,e,i,n){var r,o,a,u,l,h,c;return l={},c=function(){var t,e,i,r;for(i=n.match(/((?:'[^']*')*(?:(?:[^\|']*(?:'[^']*')+[^\|']*)+|[^\|]+))|^$/g),r=[],t=0,e=i.length;t<e;t++)h=i[t],r.push(h.trim());return r}(),r=function(){var t,e,i,n;for(i=c.shift().split("<"),n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(o.trim());return n}(),u=r.shift(),l.formatters=c,(a=r.shift())&&(l.dependencies=a.split(/\s+/)),this.bindings.push(new s[t](this,e,i,u,l))},t.prototype.build=function(){var t,e,i,n,r;for(this.bindings=[],e=function(t){return function(i){var n,r,o,a,u,l,h,c,f,d,p,g,v;if(3===i.nodeType){if(u=s.TextTemplateParser,(o=t.templateDelimiters)&&(c=u.parse(i.data,o)).length&&(1!==c.length||c[0].type!==u.types.text)){for(f=0,p=c.length;f<p;f++)h=c[f],l=document.createTextNode(h.value),i.parentNode.insertBefore(l,i),1===h.type&&t.buildBinding("TextBinding",l,null,h.value);i.parentNode.removeChild(i)}}else 1===i.nodeType&&(n=t.traverse(i));if(!n)for(v=function(){var t,e,n,r;for(n=i.childNodes,r=[],t=0,e=n.length;t<e;t++)a=n[t],r.push(a);return r}(),d=0,g=v.length;d<g;d++)r=v[d],e(r)}}(this),r=this.els,i=0,n=r.length;i<n;i++)t=r[i],e(t);this.bindings.sort(function(t,e){var i,n;return((null!=(i=e.binder)?i.priority:void 0)||0)-((null!=(n=t.binder)?n.priority:void 0)||0)})},t.prototype.traverse=function(t){var e,i,n,r,o,a,u,l,h,c,f,d,p,g,v,b;for(r=this.bindingRegExp(),o="SCRIPT"===t.nodeName||"STYLE"===t.nodeName,g=t.attributes,c=0,d=g.length;c<d;c++)if(e=g[c],r.test(e.name)){if(l=e.name.replace(r,""),!(n=this.binders[l])){v=this.binders;for(a in v)h=v[a],"*"!==a&&a.indexOf("*")!==-1&&(u=new RegExp("^"+a.replace(/\*/g,".+")+"$"),u.test(l)&&(n=h))}n||(n=this.binders["*"]),n.block&&(o=!0,i=[e])}for(b=i||t.attributes,f=0,p=b.length;f<p;f++)e=b[f],r.test(e.name)&&(l=e.name.replace(r,""),this.buildBinding("Binding",t,l,e.value));return o||(l=t.nodeName.toLowerCase(),this.components[l]&&!t._bound&&(this.bindings.push(new s.ComponentBinding(this,t,l)),o=!0)),o},t.prototype.select=function(t){var e,i,n,r,s;for(r=this.bindings,s=[],i=0,n=r.length;i<n;i++)e=r[i],t(e)&&s.push(e);return s},t.prototype.bind=function(){var t,e,i,n;for(n=this.bindings,e=0,i=n.length;e<i;e++)t=n[e],t.bind()},t.prototype.unbind=function(){var t,e,i,n;for(n=this.bindings,e=0,i=n.length;e<i;e++)t=n[e],t.unbind()},t.prototype.sync=function(){var t,e,i,n;for(n=this.bindings,e=0,i=n.length;e<i;e++)t=n[e],"function"==typeof t.sync&&t.sync()},t.prototype.publish=function(){var t,e,i,n;for(n=this.select(function(t){var e;return null!=(e=t.binder)?e.publishes:void 0}),e=0,i=n.length;e<i;e++)t=n[e],t.publish()},t.prototype.update=function(t){var e,i,n,r,s,o;null==t&&(t={});for(i in t)n=t[i],this.models[i]=n;for(o=this.bindings,r=0,s=o.length;r<s;r++)e=o[r],"function"==typeof e.update&&e.update(t)},t}(),s.Binding=function(){function t(t,e,i,n,r){this.view=t,this.el=e,this.type=i,this.keypath=n,this.options=null!=r?r:{},this.getValue=l(this.getValue,this),this.update=l(this.update,this),this.unbind=l(this.unbind,this),this.bind=l(this.bind,this),this.publish=l(this.publish,this),this.sync=l(this.sync,this),this.set=l(this.set,this),this.eventHandler=l(this.eventHandler,this),this.formattedValue=l(this.formattedValue,this),this.parseFormatterArguments=l(this.parseFormatterArguments,this),this.parseTarget=l(this.parseTarget,this),this.observe=l(this.observe,this),this.setBinder=l(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={},this.model=void 0,this.setBinder()}return t.prototype.setBinder=function(){var t,e,i,n;if(!(this.binder=this.view.binders[this.type])){n=this.view.binders;for(t in n)i=n[t],"*"!==t&&t.indexOf("*")!==-1&&(e=new RegExp("^"+t.replace(/\*/g,".+")+"$"),e.test(this.type)&&(this.binder=i,this.args=new RegExp("^"+t.replace(/\*/g,"(.+)")+"$").exec(this.type),this.args.shift()))}if(this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function)return this.binder={routine:this.binder}},t.prototype.observe=function(t,e,i){return s.sightglass(t,e,i,{root:this.view.rootInterface,adapters:this.view.adapters})},t.prototype.parseTarget=function(){var t;return t=s.TypeParser.parse(this.keypath),t.type===s.TypeParser.types.primitive?this.value=t.value:(this.observer=this.observe(this.view.models,this.keypath,this.sync),this.model=this.observer.target)},t.prototype.parseFormatterArguments=function(t,e){var i,n,r,o,a,u,l;for(t=function(){var e,i,r;for(r=[],e=0,i=t.length;e<i;e++)n=t[e],r.push(s.TypeParser.parse(n));return r}(),o=[],i=u=0,l=t.length;u<l;i=++u)n=t[i],o.push(n.type===s.TypeParser.types.primitive?n.value:((a=this.formatterObservers)[e]||(a[e]={}),(r=this.formatterObservers[e][i])?void 0:(r=this.observe(this.view.models,n.value,this.sync),this.formatterObservers[e][i]=r),r.value()));return o},t.prototype.formattedValue=function(t){var e,i,n,r,s,o,a,u,l;for(u=this.formatters,i=o=0,a=u.length;o<a;i=++o)n=u[i],e=n.match(/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g),r=e.shift(),n=this.view.formatters[r],s=this.parseFormatterArguments(e,i),(null!=n?n.read:void 0)instanceof Function?t=(l=n.read).call.apply(l,[this.model,t].concat(h.call(s))):n instanceof Function&&(t=n.call.apply(n,[this.model,t].concat(h.call(s))));return t},t.prototype.eventHandler=function(t){var e,i;return i=(e=this).view.handler,function(n){return i.call(t,this,n,e)}},t.prototype.set=function(t){var e;return t=t instanceof Function&&!this.binder["function"]&&s["public"].executeFunctions?this.formattedValue(t.call(this.model)):this.formattedValue(t),null!=(e=this.binder.routine)?e.call(this,this.el,t):void 0},t.prototype.sync=function(){var t,e;return this.set(function(){var i,n,r,s,o,a,u;if(this.observer){if(this.model!==this.observer.target){for(o=this.dependencies,i=0,r=o.length;i<r;i++)e=o[i],e.unobserve();if(this.dependencies=[],null!=(this.model=this.observer.target)&&(null!=(a=this.options.dependencies)?a.length:void 0))for(u=this.options.dependencies,n=0,s=u.length;n<s;n++)t=u[n],e=this.observe(this.model,t,this.sync),this.dependencies.push(e)}return this.observer.value()}return this.value}.call(this))},t.prototype.publish=function(){var t,e,i,n,r,s,o,a,u,l,c,f,d;if(this.observer){for(a=this.getValue(this.el),s=this.formatters.length-1,c=this.formatters.slice(0).reverse(),i=u=0,l=c.length;u<l;i=++u)n=c[i],e=s-i,t=n.split(/\s+/),r=t.shift(),o=this.parseFormatterArguments(t,e),(null!=(f=this.view.formatters[r])?f.publish:void 0)&&(a=(d=this.view.formatters[r]).publish.apply(d,[a].concat(h.call(o))));return this.observer.setValue(a)}},t.prototype.bind=function(){var t,e,i,n,r,s,o;if(this.parseTarget(),null!=(r=this.binder.bind)&&r.call(this,this.el),null!=this.model&&(null!=(s=this.options.dependencies)?s.length:void 0))for(o=this.options.dependencies,i=0,n=o.length;i<n;i++)t=o[i],e=this.observe(this.model,t,this.sync),this.dependencies.push(e);if(this.view.preloadData)return this.sync()},t.prototype.unbind=function(){var t,e,i,n,r,s,o,a,u,l;for(null!=(o=this.binder.unbind)&&o.call(this,this.el),null!=(a=this.observer)&&a.unobserve(),u=this.dependencies,r=0,s=u.length;r<s;r++)n=u[r],n.unobserve();this.dependencies=[],l=this.formatterObservers;for(i in l){e=l[i];for(t in e)n=e[t],n.unobserve()}return this.formatterObservers={}},t.prototype.update=function(t){var e,i;return null==t&&(t={}),this.model=null!=(e=this.observer)?e.target:void 0,null!=(i=this.binder.update)?i.call(this,t):void 0},t.prototype.getValue=function(t){return this.binder&&null!=this.binder.getValue?this.binder.getValue.call(this,t):s.Util.getInputValue(t)},t}(),s.ComponentBinding=function(t){function e(t,e,i){var n,r,o,a,u,h,c,f;for(this.view=t,this.el=e,this.type=i,this.unbind=l(this.unbind,this),this.bind=l(this.bind,this),this.locals=l(this.locals,this),this.component=this.view.components[this.type],this["static"]={},this.observers={},this.upstreamObservers={},r=t.bindingRegExp(),c=this.el.attributes||[],u=0,h=c.length;u<h;u++)n=c[u],r.test(n.name)||(o=this.camelCase(n.name),a=s.TypeParser.parse(n.value),d.call(null!=(f=this.component["static"])?f:[],o)>=0?this["static"][o]=n.value:a.type===s.TypeParser.types.primitive?this["static"][o]=a.value:this.observers[o]=n.value)}return f(e,t),e.prototype.sync=function(){},e.prototype.update=function(){},e.prototype.publish=function(){},e.prototype.locals=function(){var t,e,i,n,r,s;i={},r=this["static"];for(t in r)n=r[t],i[t]=n;s=this.observers;for(t in s)e=s[t],i[t]=e.value();return i},e.prototype.camelCase=function(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})},e.prototype.bind=function(){var t,e,i,n,r,o,a,u,l,h,c,f,d,p,g,v,b,m,y,w;if(!this.bound){p=this.observers;for(e in p)i=p[e],this.observers[e]=this.observe(this.view.models,i,function(t){return function(e){return function(){return t.componentView.models[e]=t.observers[e].value()}}}(this).call(this,e));this.bound=!0}if(null!=this.componentView)this.componentView.bind();else{for(this.el.innerHTML=this.component.template.call(this),a=this.component.initialize.call(this,this.el,this.locals()),this.el._bound=!0,o={},g=s.extensions,h=0,f=g.length;h<f;h++){if(r=g[h],o[r]={},this.component[r]){v=this.component[r];for(t in v)u=v[t],o[r][t]=u}b=this.view[r];for(t in b)u=b[t],null==(l=o[r])[t]&&(l[t]=u)}for(m=s.options,c=0,d=m.length;c<d;c++)r=m[c],o[r]=null!=(y=this.component[r])?y:this.view[r];this.componentView=new s.View(Array.prototype.slice.call(this.el.childNodes),a,o),this.componentView.bind(),w=this.observers;for(e in w)n=w[e],this.upstreamObservers[e]=this.observe(this.componentView.models,e,function(t){return function(e,i){return function(){return i.setValue(t.componentView.models[e])}}}(this).call(this,e,n))}},e.prototype.unbind=function(){var t,e,i,n,r;i=this.upstreamObservers;for(t in i)e=i[t],e.unobserve();n=this.observers;for(t in n)e=n[t],e.unobserve();return null!=(r=this.componentView)?r.unbind.call(this):void 0},e}(s.Binding),s.TextBinding=function(t){function e(t,e,i,n,r){this.view=t,this.el=e,this.type=i,this.keypath=n,this.options=null!=r?r:{},this.sync=l(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={}}return f(e,t),e.prototype.binder={routine:function(t,e){return t.data=null!=e?e:""}},e.prototype.sync=function(){return e.__super__.sync.apply(this,arguments)},e}(s.Binding),s["public"].binders.text=function(t,e){return null!=t.textContent?t.textContent=null!=e?e:"":t.innerText=null!=e?e:""},s["public"].binders.html=function(t,e){return t.innerHTML=null!=e?e:""},s["public"].binders.show=function(t,e){return t.style.display=e?"":"none"},s["public"].binders.hide=function(t,e){return t.style.display=e?"none":""},s["public"].binders.enabled=function(t,e){return t.disabled=!e},s["public"].binders.disabled=function(t,e){return t.disabled=!!e},s["public"].binders.checked={publishes:!0,priority:2e3,bind:function(t){return s.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return s.Util.unbindEvent(t,"change",this.publish)},routine:function(t,e){var i;return"radio"===t.type?t.checked=(null!=(i=t.value)?i.toString():void 0)===(null!=e?e.toString():void 0):t.checked=!!e}},s["public"].binders.unchecked={publishes:!0,priority:2e3,bind:function(t){return s.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return s.Util.unbindEvent(t,"change",this.publish)},routine:function(t,e){var i;return"radio"===t.type?t.checked=(null!=(i=t.value)?i.toString():void 0)!==(null!=e?e.toString():void 0):t.checked=!e}},s["public"].binders.value={publishes:!0,priority:3e3,bind:function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return this.event="SELECT"===t.tagName?"change":"input",s.Util.bindEvent(t,this.event,this.publish)},unbind:function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return s.Util.unbindEvent(t,this.event,this.publish)},routine:function(t,e){var i,n,r,s,o,a,u;if("INPUT"===t.tagName&&"radio"===t.type)return t.setAttribute("value",e);if(null!=window.jQuery){if(t=jQuery(t),(null!=e?e.toString():void 0)!==(null!=(s=t.val())?s.toString():void 0))return t.val(null!=e?e:"")}else if("select-multiple"===t.type){if(null!=e){for(u=[],n=0,r=t.length;n<r;n++)i=t[n],u.push(i.selected=(o=i.value,d.call(e,o)>=0));return u}}else if((null!=e?e.toString():void 0)!==(null!=(a=t.value)?a.toString():void 0))return t.value=null!=e?e:""}},s["public"].binders["if"]={block:!0,priority:4e3,bind:function(t){var e,i;if(null==this.marker)return e=[this.view.prefix,this.type].join("-").replace("--","-"),i=t.getAttribute(e),this.marker=document.createComment(" rivets: "+this.type+" "+i+" "),this.bound=!1,t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t)},unbind:function(){if(this.nested)return this.nested.unbind(),this.bound=!1},routine:function(t,e){var i,n,r,o;if(!!e==!this.bound){if(e){r={},o=this.view.models;for(i in o)n=o[i],r[i]=n;return(this.nested||(this.nested=new s.View(t,r,this.view.options()))).bind(),this.marker.parentNode.insertBefore(t,this.marker.nextSibling),this.bound=!0}return t.parentNode.removeChild(t),this.nested.unbind(),this.bound=!1}},update:function(t){var e;return null!=(e=this.nested)?e.update(t):void 0}},s["public"].binders.unless={block:!0,priority:4e3,bind:function(t){return s["public"].binders["if"].bind.call(this,t)},unbind:function(){return s["public"].binders["if"].unbind.call(this)},routine:function(t,e){return s["public"].binders["if"].routine.call(this,t,!e)},update:function(t){return s["public"].binders["if"].update.call(this,t)}},s["public"].binders["on-*"]={"function":!0,priority:1e3,unbind:function(t){if(this.handler)return s.Util.unbindEvent(t,this.args[0],this.handler)},routine:function(t,e){return this.handler&&s.Util.unbindEvent(t,this.args[0],this.handler),s.Util.bindEvent(t,this.args[0],this.handler=this.eventHandler(e));
}},s["public"].binders["each-*"]={block:!0,priority:4e3,bind:function(t){var e,i,n,r,s;if(null==this.marker)e=[this.view.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t);else for(s=this.iterated,n=0,r=s.length;n<r;n++)i=s[n],i.bind()},unbind:function(t){var e,i,n,r;if(null!=this.iterated)for(r=this.iterated,i=0,n=r.length;i<n;i++)e=r[i],e.unbind()},routine:function(t,e){var i,n,r,o,a,u,l,h,c,f,d,p,g,v,b,m,y,w,E,O;if(l=this.args[0],e=e||[],this.iterated.length>e.length)for(w=Array(this.iterated.length-e.length),p=0,b=w.length;p<b;p++)r=w[p],d=this.iterated.pop(),d.unbind(),this.marker.parentNode.removeChild(d.els[0]);for(o=g=0,m=e.length;g<m;o=++g)if(u=e[o],n={index:o},n[s["public"].iterationAlias(l)]=o,n[l]=u,null==this.iterated[o]){E=this.view.models;for(a in E)u=E[a],null==n[a]&&(n[a]=u);c=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,h=this.view.options(),h.preloadData=!0,f=t.cloneNode(!0),d=new s.View(f,n,h),d.bind(),this.iterated.push(d),this.marker.parentNode.insertBefore(f,c.nextSibling)}else this.iterated[o].models[l]!==u&&this.iterated[o].update(n);if("OPTION"===t.nodeName)for(O=this.view.bindings,v=0,y=O.length;v<y;v++)i=O[v],i.el===this.marker.parentNode&&"value"===i.type&&i.sync()},update:function(t){var e,i,n,r,s,o,a;e={};for(i in t)n=t[i],i!==this.args[0]&&(e[i]=n);for(a=this.iterated,s=0,o=a.length;s<o;s++)r=a[s],r.update(e)}},s["public"].binders["class-*"]=function(t,e){var i;if(i=" "+t.className+" ",!e==(i.indexOf(" "+this.args[0]+" ")!==-1))return t.className=e?""+t.className+" "+this.args[0]:i.replace(" "+this.args[0]+" "," ").trim()},s["public"].binders["*"]=function(t,e){return null!=e?t.setAttribute(this.type,e):t.removeAttribute(this.type)},s["public"].formatters.call=function(){var t,e;return e=arguments[0],t=2<=arguments.length?h.call(arguments,1):[],e.call.apply(e,[this].concat(h.call(t)))},s["public"].adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(t){var e,i,n;return t.hasOwnProperty(this.id)||(e=this.counter++,Object.defineProperty(t,this.id,{value:e})),(i=this.weakmap)[n=t[this.id]]||(i[n]={callbacks:{}})},cleanupWeakReference:function(t,e){if(!(Object.keys(t.callbacks).length||t.pointers&&Object.keys(t.pointers).length))return delete this.weakmap[e]},stubFunction:function(t,e){var i,n,r;return n=t[e],i=this.weakReference(t),r=this.weakmap,t[e]=function(){var e,s,o,a,u,l,h,c,f,d;a=n.apply(t,arguments),h=i.pointers;for(o in h)for(s=h[o],d=null!=(c=null!=(f=r[o])?f.callbacks[s]:void 0)?c:[],u=0,l=d.length;u<l;u++)(e=d[u])();return a}},observeMutations:function(t,e,i){var n,r,s,o,a,u;if(Array.isArray(t)){if(s=this.weakReference(t),null==s.pointers)for(s.pointers={},r=["push","pop","shift","unshift","sort","reverse","splice"],a=0,u=r.length;a<u;a++)n=r[a],this.stubFunction(t,n);if(null==(o=s.pointers)[e]&&(o[e]=[]),d.call(s.pointers[e],i)<0)return s.pointers[e].push(i)}},unobserveMutations:function(t,e,i){var n,r,s;if(Array.isArray(t)&&null!=t[this.id]&&(r=this.weakmap[t[this.id]])&&(s=r.pointers[e]))return(n=s.indexOf(i))>=0&&s.splice(n,1),s.length||delete r.pointers[e],this.cleanupWeakReference(r,t[this.id])},observe:function(t,e,i){var n,r,s;return n=this.weakReference(t).callbacks,null==n[e]&&(n[e]=[],r=Object.getOwnPropertyDescriptor(t,e),(null!=r?r.get:void 0)||(null!=r?r.set:void 0)||(s=t[e],Object.defineProperty(t,e,{enumerable:!0,get:function(){return s},set:function(i){return function(r){var o,a,u,l,h;if(r!==s&&(i.unobserveMutations(s,t[i.id],e),s=r,a=i.weakmap[t[i.id]])){if(n=a.callbacks,n[e])for(h=n[e].slice(),u=0,l=h.length;u<l;u++)o=h[u],d.call(n[e],o)>=0&&o();return i.observeMutations(r,t[i.id],e)}}}(this)}))),d.call(n[e],i)<0&&n[e].push(i),this.observeMutations(t[e],t[this.id],e)},unobserve:function(t,e,i){var n,r,s;if((s=this.weakmap[t[this.id]])&&(n=s.callbacks[e]))return(r=n.indexOf(i))>=0&&(n.splice(r,1),n.length||(delete s.callbacks[e],this.unobserveMutations(t[e],t[this.id],e))),this.cleanupWeakReference(s,t[this.id])},get:function(t,e){return t[e]},set:function(t,e,i){return t[e]=i}},s.factory=function(t){return s.sightglass=t,s["public"]._=s,s["public"]},"object"==typeof("undefined"!=typeof t&&null!==t?t.exports:void 0)?t.exports=s.factory(i(2)):(n=[i(2)],r=function(t){return this.rivets=s.factory(t)}.apply(e,n),!(void 0!==r&&(t.exports=r)))}).call(this)}).call(e,i(13)(t))},function(t,e,i){!function(){"use strict";var i="1.0.0",n=1;if(!Object.create)var r=function(){};var s=Array.prototype.slice,o={attributes:{},eventHandlers:{"-1":{}},guid:-1,addEvent:function(t){o.eventHandlers[t.guid][t.type]||(o.eventHandlers[t.guid][t.type]=[]),o.eventHandlers[t.guid][t.type].push({guid:t.guid,handler:t.handler,scope:t.scope,type:t.type})},addEventHandler:function(t,e,i){var n,r={};"string"==typeof t?(n=i||!1,r[t]=e):(n=e||!1,r=t);for(var s in r)for(var a=r[s],u=s.split(" "),l=0,h=u.length;l<h;l++){var c=u[l];o.addEvent.call(this,{guid:this._guid||this._.guid,handler:a,scope:n,type:c})}},addGuid:function(t,e){t._guid&&!e||(t._guid=n++,o.attributes[t._guid]={},o.eventHandlers[t._guid]={})},attr:function(t){return o.attributes[t]},clone:function(t){var e=o.typeOf(t);return"object"===e?o.extend({},t):"array"===e?t.slice(0):void 0},create:function(t){return Object.create?Object.create(t):(r.prototype=t,new r)},createSubclass:function(t,e){function i(){if(!(this instanceof i))throw new Error("Please use 'new' when initializing Stapes classes");this.on&&o.addGuid(this,!0),r.apply(this,arguments)}t=t||{},e=e||!1;var n=t.superclass.prototype,r=t.hasOwnProperty("constructor")?t.constructor:function(){};e&&o.extend(n,a),i.prototype=o.create(n),i.prototype.constructor=i,o.extend(i,{extend:function(){return o.extendThis.apply(this,arguments)},parent:n,proto:function(){return o.extendThis.apply(this.prototype,arguments)},subclass:function(t){return t=t||{},t.superclass=this,o.createSubclass(t)}});for(var s in t)"constructor"!==s&&"superclass"!==s&&(i.prototype[s]=t[s]);return i},emitEvents:function(t,e,i,n){i=i||!1,n=n||this._guid;for(var r=s.call(o.eventHandlers[n][t]),a=0,u=r.length;a<u;a++){var l=o.extend({},r[a]),h=l.scope?l.scope:this;i&&(l.type=i),l.scope=h,l.handler.call(l.scope,e,l)}},extend:function(){for(var t=s.call(arguments),e=t.shift(),i=0,n=t.length;i<n;i++){var r=t[i];for(var o in r)e[o]=r[o]}return e},extendThis:function(){var t=s.call(arguments);return t.unshift(this),o.extend.apply(this,t)},makeUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"==t?e:3&e|8;return i.toString(16)})},removeAttribute:function(t,e){e=e||!1;for(var i=o.trim(t).split(" "),n={},r=0,s=i.length;r<s;r++){var a=o.trim(i[r]);a&&(n.key=a,n.oldValue=o.attr(this._guid)[a],delete o.attr(this._guid)[a],e||(this.emit("change",a),this.emit("change:"+a),this.emit("mutate",n),this.emit("mutate:"+a,n),this.emit("remove",a),this.emit("remove:"+a)),delete n.oldValue)}},removeEventHandler:function(t,e){var i=o.eventHandlers[this._guid];if(t&&e){if(i=i[t],!i)return;for(var n,r=0,s=i.length;r<s;r++)n=i[r].handler,n&&n===e&&(i.splice(r--,1),s--)}else t?delete i[t]:o.eventHandlers[this._guid]={}},setAttribute:function(t,e,i){i=i||!1;var n=this.has(t),r=o.attr(this._guid)[t];if(e!==r&&(o.attr(this._guid)[t]=e,!i)){this.emit("change",t),this.emit("change:"+t,e);var s={key:t,newValue:e,oldValue:"undefined"!=typeof r?r:null};this.emit("mutate",s),this.emit("mutate:"+t,s);var a=n?"update":"create";this.emit(a,t),this.emit(a+":"+t,e)}},trim:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},typeOf:function(t){return null===t||"undefined"==typeof t?String(t):Object.prototype.toString.call(t).replace(/\[object |\]/g,"").toLowerCase()},updateAttribute:function(t,e,i){var n=this.get(t),r=o.typeOf(n);"object"!==r&&"array"!==r||(n=o.clone(n));var s=e.call(this,n,t);o.setAttribute.call(this,t,s,i||!1)}},a={emit:function(t,e){e="undefined"==typeof e?null:e;for(var i=t.split(" "),n=0,r=i.length;n<r;n++){var s=i[n];o.eventHandlers[-1].all&&o.emitEvents.call(this,"all",e,s,-1),o.eventHandlers[-1][s]&&o.emitEvents.call(this,s,e,s,-1),"number"==typeof this._guid&&(o.eventHandlers[this._guid].all&&o.emitEvents.call(this,"all",e,s),o.eventHandlers[this._guid][s]&&o.emitEvents.call(this,s,e))}},off:function(){o.removeEventHandler.apply(this,arguments)},on:function(){o.addEventHandler.apply(this,arguments)}};o.Module=function(){},o.Module.prototype={each:function(t,e){var i=o.attr(this._guid);for(var n in i){var r=i[n];t.call(e||this,r,n)}},extend:function(){return o.extendThis.apply(this,arguments)},filter:function(t){var e=[],i=o.attr(this._guid);for(var n in i)t.call(this,i[n],n)&&e.push(i[n]);return e},get:function(t){if("string"==typeof t){if(arguments.length>1){for(var e={},i=0,n=arguments.length;i<n;i++){var r=arguments[i];e[r]=this.get(r)}return e}return this.has(t)?o.attr(this._guid)[t]:null}if("function"==typeof t){var s=this.filter(t);return s.length?s[0]:null}},getAll:function(){return o.clone(o.attr(this._guid))},getAllAsArray:function(){var t=[],e=o.attr(this._guid);for(var i in e){var n=e[i];"object"!==o.typeOf(n)||n.id||(n.id=i),t.push(n)}return t},has:function(t){return"undefined"!=typeof o.attr(this._guid)[t]},map:function(t,e){var i=[];return this.each(function(n,r){i.push(t.call(e||this,n,r))},e||this),i},push:function(t,e){if("array"===o.typeOf(t))for(var i=0,n=t.length;i<n;i++)o.setAttribute.call(this,o.makeUuid(),t[i],e||!1);else o.setAttribute.call(this,o.makeUuid(),t,e||!1);return this},remove:function(t,e){return"undefined"==typeof t?(o.attributes[this._guid]={},this.emit("change remove")):"function"==typeof t?this.each(function(i,n){t(i)&&o.removeAttribute.call(this,n,e)}):o.removeAttribute.call(this,t,e||!1),this},set:function(t,e,i){if("object"==typeof t)for(var n in t)o.setAttribute.call(this,n,t[n],e||!1);else o.setAttribute.call(this,t,e,i||!1);return this},size:function(){var t=0,e=o.attr(this._guid);for(var i in e)t++;return t},update:function(t,e,i){return"string"==typeof t?o.updateAttribute.call(this,t,e,i||!1):"function"==typeof t&&this.each(function(e,i){o.updateAttribute.call(this,i,t)}),this}};var u={_:o,extend:function(){return o.extendThis.apply(o.Module.prototype,arguments)},mixinEvents:function(t){return t=t||{},o.addGuid(t),o.extend(t,a)},on:function(){o.addEventHandler.apply(this,arguments)},subclass:function(t,e){return e=e||!1,t=t||{},t.superclass=e?function(){}:o.Module,o.createSubclass(t,!e)},version:i};"undefined"!=typeof t&&t.exports&&(e=t.exports=u),e.Stapes=u}()},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),s=n(r);e["default"]=s["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0});var s=i(2),o=r(s),a=i(3),u=n(a);e["default"]=u["default"].subclass({htmlTemplate:'\n      <div class="kw-pagination l-flexbox l-pack-center l-align-center">\n         <span\n               rv-on-click="previousPage"\n               rv-class-disabled="firstPage"\n               class="kw-page-link kw-pagination-arrow">\n            <i class="icon-angle-left"></i>\n         </span>\n         <span\n               rv-each-page="pages"\n               rv-on-click="page.clickEvent"\n               rv-class-kw-active-page="page.selected"\n               class="kw-page-link l-pack-center l-align-center">\n            {page.text}\n         </span>\n         <span\n               rv-on-click="nextPage"\n               rv-class-disabled="lastPage"\n               class="kw-page-link kw-pagination-arrow">\n               <i class="icon-angle-right"></i>\n         </span>\n      </div>\n      ',constructor:function(t,e,i,n,r){var s=this;u["default"].apply(this,[{rootElement:t}]),this.scopeKey=i,this.pageSize=n?n:3,this.maxVisiblePages=r?r:5,this.scope.currentPage=0,this.scope.firstPage=!0,this.scope.lastPage=!1,e["_"+i]=[],this.originalArray=e[i],this.currentPageArray=e["_"+i],o(e,i,function(){s.originalArray=e[i],s.setCurrentPage(0),s.clearArray(),s.adaptArray()}),this.scope.nextPage=this.nextPage.bind(this),this.scope.previousPage=this.previousPage.bind(this),this.adaptArray()},clearArray:function(){this.currentPageArray.splice(0,this.currentPageArray.length)},getCurrentPage:function(){return this.scope.currentPage},setCurrentPage:function(t){if(t!==this.getCurrentPage()){if(t<0||t>=this.getNumberOfPages())throw new Error("Invalid page number");this.scope.currentPage=t,this.adaptArray()}},getNumberOfPages:function(){return Math.ceil(this.originalArray.length/this.pageSize)},nextPage:function(){return this.getCurrentPage()<this.getNumberOfPages()-1&&this.setCurrentPage(this.getCurrentPage()+1),this.getCurrentPage()},previousPage:function(){return this.getCurrentPage()>0&&this.setCurrentPage(this.getCurrentPage()-1),this.getCurrentPage()},adaptArray:function(){this.clearArray();var t=this.getCurrentPage()*this.pageSize,e=t+this.pageSize;e>=this.originalArray.length&&(e=this.originalArray.length);for(var i=t;i<e;++i)this.currentPageArray.push(this.originalArray[i]);this.scope.firstPage=0===this.getCurrentPage(),this.scope.lastPage=this.getCurrentPage()===this.getNumberOfPages()-1,this.render()},init:function(){this.render()},render:function(){this.scope.pages=[];var t=this.getCurrentPage()-2;if(this.getCurrentPage()+2>=this.getNumberOfPages())var t=this.getNumberOfPages()-5;t<0&&(t=0);for(var e=t,i=0;e<this.getNumberOfPages()&&i<5;)this.scope.pages.push({text:e+1+"",number:e,selected:e===this.getCurrentPage(),clickEvent:this.setCurrentPage.bind(this,e)}),++e,++i}})},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),s=n(r);e["default"]={getGroupEvents:function(t){var e="/event/group/"+t+".json";return this.doRequest(e)},getGroup:function(t){var e="/group/"+t+".json";return this.doRequest(e)},getEventsByFilter:function(t,e){var i="/listView/"+t;return this.doRequest(i,e,"v3")},adaptV2BetOffer:function(t){t.suspended===!0&&(t.open=!1)},adaptV2LiveData:function(t){if(null!=t&&null!=t.statistics){var e=t.statistics;null!=e.sets&&(e.setBasedStats=e.sets,delete e.sets),null!=e.football&&(e.footballStats=e.football,delete e.football)}},adaptV2Event:function(t){},getLiveEventData:function(t){var e=this,i="/event/"+t+"/livedata.json";return this.doRequest(i,null,null,!0).then(function(t){return e.adaptV2LiveData(t),t})},getLiveEvents:function(){var t=this,e="/event/live/open.json";return this.doRequest(e,null,null,!0).then(function(e){if(null!=e.error)return e;var i=e.liveEvents;return e.events=i,e.events.forEach(t.adaptV2Event),delete e.liveEvents,delete e.group,i.forEach(function(e){e.betOffers=[],null!=e.mainBetOffer&&(t.adaptV2BetOffer(e.mainBetOffer),e.betOffers.push(e.mainBetOffer),delete e.mainBetOffer),t.adaptV2LiveData(e.liveData)}),e})},getLiveEvent:function(t){var e=this,i="/betoffer/live/event/"+t+".json";return this.doRequest(i,null,null,!0).then(function(t){return t.betOffers=t.betoffers,delete t.betoffers,t.betOffers.forEach(e.adaptV2BetOffer),t.event=t.events[0],e.adaptV2Event(t.event),delete t.events,t})},getLiveEventsByFilter:function(t){var e=this;t=t.replace(/\/$/,"");var i=t.split("/");i=i.slice(0,3);var n="/listView/all/all/all/all/in-play/";return new Promise(function(t,r){e.doRequest(n,null,"v3").then(function(e){for(var n={events:[]},r=0,s=e.events.length;r<s;++r){var o=0,a=e.events[r].event.path.length,u=!0;for(a>i.length&&(a=i.length);o<a;++o)"all"!==i[o]&&e.events[r].event.path[o].termKey!==i[o]&&(u=!1);u&&n.events.push(e.events[r])}t(n)})})},getEvent:function(t){var e=this;return this.doRequest("/betoffer/event/"+t+".json").then(function(t){return t.betOffers=t.betoffers,delete t.betoffers,t.betOffers.forEach(e.adaptV2BetOffer),t.event=t.events[0],e.adaptV2Event(t.event),delete t.events,t})},getHighlight:function(){return this.doRequest("/group/highlight.json")},getEventBetoffers:function(t){return console.warn("getEventBetoffers is deprecated, use getEvent instead"),this.getEvent.apply(this,arguments)},doRequest:function(t,e,i,n){if(null!=s.config.offering){var r=s.config.apiBaseUrl.replace("{apiVersion}",null!=i?i:s.config.version),o=r+s.config.offering+t,a=e||{},u={lang:a.locale||s.config.locale,market:a.market||s.config.market,client_id:a.client_id||s.config.client_id,include:a.include||"",betOffers:a.betOffers||"COMBINED",categoryGroup:a.categoryGroup||"COMBINED",displayDefault:a.displayDefault||!0};return n===!0&&(u.nocache=Date.now()),o+="?"+Object.keys(u).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(u[t])}).join("&"),s.getData(o)}console.warn("The offering has not been set, is the right widget api version loaded?")}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),s=n(r);e["default"]={config:{baseApiUrl:"https://api.kambi.com/statistics/api/"},getStatistics:function(t,e){return e=e.match(/[^?]*/)[0],"/"===e[e.length-1]&&(e=e.slice(0,-1)),console.debug(this.config.baseApiUrl+s["default"].config.offering+"/"+t+"/"+e+".json"),s["default"].getData(this.config.baseApiUrl+s["default"].config.offering+"/"+t+"/"+e+".json")}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),s=n(r),o=i(5),a=n(o),u=i(1),l=n(u),h=s["default"].subclass();e["default"]={api:{requestSetup:function(){},request:function(){},set:function(){},remove:function(){},createUrl:function(){},createFilterUrl:function(){}},events:new h,betslipIds:[],handleResponse:function(t){switch(t.type){case this.api.WIDGET_HEIGHT:this.events.emit("WIDGET:HEIGHT",t.data);break;case this.api.BETSLIP_OUTCOMES:for(var e=0,i=t.data.outcomes.length,n=[];e<i;++e)n.push(t.data.outcomes[e].id);var r=a["default"].diffArray(this.betslipIds,n),s=a["default"].diffArray(n,this.betslipIds);for(this.betslipIds=n,e=0,i=r.length;e<i;++e)this.events.emit("OUTCOME:REMOVED:"+r[e]);for(e=0,i=s.length;e<i;++e)this.events.emit("OUTCOME:ADDED:"+s[e]);this.events.emit("OUTCOMES:UPDATE",t.data);break;case this.api.WIDGET_ARGS:l["default"].setArgs(t.data),this.events.emit("WIDGET:ARGS",t.data);break;case this.api.PAGE_INFO:l["default"].setPageInfo(t.data),this.events.emit("PAGE:INFO",t.data);break;case this.api.CLIENT_ODDS_FORMAT:l["default"].setOddsFormat(t.data),this.events.emit("ODDS:FORMAT",t.data);break;case this.api.CLIENT_CONFIG:l["default"].setConfig(t.data),this.events.emit("CLIENT:CONFIG",t.data);break;case this.api.USER_LOGGED_IN:console.debug("User logged in",t.data),this.events.emit("USER:LOGGED_IN",t.data);break;case"Setup":this.events.emit("Setup response",t.data);break;default:console.info("Unhandled response type: "+t.type),console.info(t)}},createUrl:function(t,e){return this.api.createUrl(t,e)},createFilterUrl:function(t){return this.api.createFilterUrl(t,l["default"].config.routeRoot)},getPageType:function(){if(!l["default"].pageInfo.pageType)return"";var t=l["default"].pageInfo.pageType;switch(t){case"event":return"";case"event-live":return"live/";default:console.info("Unknown page type: "+t)}},requestSetup:function(t){this.api.requestSetup(t)},requestWidgetHeight:function(){this.api.request(this.api.WIDGET_HEIGHT)},setWidgetHeight:function(t){this.api.set(this.api.WIDGET_HEIGHT,t)},adaptWidgetHeight:function(){var t=document.body,e=document.documentElement,i=Math.max(t.offsetHeight,e.scrollHeight,e.offsetHeight);this.api.set(this.api.WIDGET_HEIGHT,i)},enableWidgetTransition:function(t){t?this.api.set(this.api.WIDGET_ENABLE_TRANSITION):this.api.set(this.api.WIDGET_DISABLE_TRANSITION)},removeWidget:function(){this.api.remove()},navigateToLiveEvent:function(t){this.navigateClient("event/live/"+t)},navigateToEvent:function(t){this.navigateClient("event/"+t)},navigateToFilter:function(t){"string"==typeof t&&t.indexOf("filter/")===-1&&(t="filter/"+t),this.navigateClient(t)},navigateToLiveEvents:function(){this.navigateClient(["in-play"])},addOutcomeToBetslip:function(t,e,i,n){var r=[];Array.isArray(t)?r=t:r.push(t);var s={outcomes:r};null!=e&&(e.isArray()?s.stakes=e:s.stakes=[e]),s.couponType=1===r.length?this.api.BETSLIP_OUTCOMES_ARGS.TYPE_SINGLE:this.api.BETSLIP_OUTCOMES_ARGS.TYPE_COMBINATION,s.updateMode="replace"!==i?this.api.BETSLIP_OUTCOMES_ARGS.UPDATE_APPEND:this.api.BETSLIP_OUTCOMES_ARGS.UPDATE_REPLACE,null!=n&&(s.source=n),null!=l["default"].widgetTrackingName&&(s.name=l["default"].widgetTrackingName),this.api.set(this.api.BETSLIP_OUTCOMES,s)},removeOutcomeFromBetslip:function(t){var e=[];Array.isArray(t)?e=t:e.push(t);var i={outcomes:e};null!=l["default"].widgetTrackingName&&(i.name=l["default"].widgetTrackingName),this.api.set(this.api.BETSLIP_OUTCOMES_REMOVE,i)},requestBetslipOutcomes:function(){this.api.request(this.api.BETSLIP_OUTCOMES)},requestPageInfo:function(){this.api.request(this.api.PAGE_INFO)},requestWidgetArgs:function(){this.api.request(this.api.WIDGET_ARGS)},requestClientConfig:function(){this.api.request(this.api.CLIENT_CONFIG)},requestOddsFormat:function(){this.api.request(this.api.CLIENT_ODDS_FORMAT)},requestOddsAsAmerican:function(t){var e=this;return new Promise(function(i){e.api.requestOddsAsAmerican(t,function(t){i(t)})})},requestOddsAsFractional:function(t){var e=this;return new Promise(function(i){e.api.requestOddsAsFractional(t,function(t){i(t)})})},navigateClient:function(t){var e="";"string"==typeof t?e="#"+l["default"].config.routeRoot+t:Array.isArray(t)&&(e=this.api.createFilterUrl(t,l["default"].config.routeRoot)),null!=l["default"].widgetTrackingName?this.api.navigateClient(e,l["default"].widgetTrackingName):this.api.navigateClient(e)}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])});